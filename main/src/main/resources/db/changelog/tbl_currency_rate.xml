<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <changeSet author="j.azad" id="J.AZAD-025">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="D_CURRENCY_DATE" type="timestamp">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-026">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="N_FROM" type="number(10, 0)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-027">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="N_TO" type="number(10, 0)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-028">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="N_REFERENCE" type="number(10, 0)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-030">
        <addUniqueConstraint columnNames="D_CURRENCY_DATE, N_FROM, N_TO, N_REFERENCE" constraintName="UNIQE_List_CrrencyRate" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-031">
        <dropColumn columnName="C_AED_USD" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-032">
        <dropColumn columnName="C_DATE" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-033">
        <dropColumn columnName="C_EUR_USD" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-034">
        <dropColumn columnName="C_IRR_USD" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-035">
        <dropColumn columnName="C_RMB_USD" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

    <changeSet author="j.azad" id="J.AZAD-038">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="N_CURRENCY_RATE_VALUE" type="number(10, 2)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="Abiz" id="AZAARE-005">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="N_CURRENCY_TYPE_FROM" type="number(1,0)"/>
        </addColumn>
    </changeSet>

    <changeSet author="Abiz" id="AZAARE-006">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="N_CURRENCY_TYPE_TO" type="number(1,0)"/>
        </addColumn>
    </changeSet>

    <changeSet author="Abiz" id="AZAARE-007">
        <dropUniqueConstraint constraintName="UNIQE_LIST_CRRENCYRATE" tableName="TBL_CURRENCY_RATE"/>
        <addUniqueConstraint columnNames="D_CURRENCY_DATE, N_FROM, N_TO, N_REFERENCE, N_CURRENCY_TYPE_FROM, N_CURRENCY_TYPE_TO" constraintName="UNIQUE_LIST_CURRENCY_RATE" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

    <changeSet author="Abiz" id="AZAARE-013">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="F_UNIT_FROM" type="number(19, 0)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="Abiz" id="AZAARE-014">
        <addColumn tableName="TBL_CURRENCY_RATE">
            <column name="F_UNIT_TO" type="number(19, 0)">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="Abiz" id="AZAARE-015">
        <addForeignKeyConstraint baseColumnNames="F_UNIT_FROM" baseTableName="TBL_CURRENCY_RATE" constraintName="CurrencyRate2UnitF" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID" referencedTableName="TBL_UNIT" validate="true"/>
    </changeSet>
    <changeSet author="Abiz" id="AZAARE-016">
        <addForeignKeyConstraint baseColumnNames="F_UNIT_TO" baseTableName="TBL_CURRENCY_RATE" constraintName="CurrencyRate2UnitT" deferrable="false" initiallyDeferred="false" referencedColumnNames="ID" referencedTableName="TBL_UNIT" validate="true"/>
    </changeSet>

    <changeSet author="Abiz" id="AZAARE-017">
        <dropUniqueConstraint constraintName="UNIQUE_LIST_CURRENCY_RATE" tableName="TBL_CURRENCY_RATE"/>
        <addUniqueConstraint columnNames="D_CURRENCY_DATE, F_UNIT_FROM, F_UNIT_TO, N_REFERENCE, N_CURRENCY_TYPE_FROM, N_CURRENCY_TYPE_TO" constraintName="UNIQUE_LIST_CURRENCY_RATE" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

    <changeSet author="Abiz" id="AZAARE-018">
        <dropColumn columnName="N_FROM" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>
    <changeSet author="Abiz" id="AZAARE-019">
        <dropColumn columnName="N_TO" tableName="TBL_CURRENCY_RATE"/>
    </changeSet>

</databaseChangeLog>
